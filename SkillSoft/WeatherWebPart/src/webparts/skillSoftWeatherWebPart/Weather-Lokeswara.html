
<script type="text/javascript" src="/Style%20Library/Connect_Redesign_2019/JS/jquery-1.8.3.min.js"></script>

<script type="text/javascript">

    $(document).ready(function () {

        //get user name from user profile
        getUserDetails();

    });


    function getUserDetails() {
        jQuery.ajax({
            url: _spPageContextInfo.webServerRelativeUrl + "/_api/SP.UserProfiles.PeopleManager/GetMyProperties",
            type: "GET",
            headers: { "Accept": "application/json;odata=verbose" }
        }).done(function (data) {
            $("div#UserLoginuserName").html("Hi " + data.d.DisplayName.split(' ')[0] + "! What would you like to do today?");

        }).fail(function () {
            console.log(failed);
        });

    }


</script>
<!-- Weather script start here-->
<script type="text/javascript">

    /*Loading Weather Info*/
    window.__geoJSONPCallback = function (loc) {

        $.ajax({
            url: "https://api.darksky.net/forecast/9ca71f8501030cefecfa79c9899b9b32/" + loc.latitude + "," + loc.longitude,
            dataType: "jsonp",
            success: function (data) {

                var temperature = ((data.currently.temperature - 32) * 5 / 9).toFixed(0);
                var hiTemperature = ((data.daily.data[0].apparentTemperatureHigh - 32) * 5 / 9).toFixed(0);
                var minTemperature = ((data.daily.data[0].apparentTemperatureMin - 32) * 5 / 9).toFixed(0);

                //binding to  weather code to table;
                var tableweather = '<table style="height:80%;display: inline-block;"><tr><td style="font-size: 35px;font-weight:bold;padding-top: 5px;">' + temperature + '&#176;</td>' +
                    '<td><div style="font-size: 12px;font-weight:bold;padding-top:10px;">Hi ' + hiTemperature + '&#176;</div>' +
                    '<div style="font-size: 12px;font-weight:bold;">Lo ' + minTemperature + '&#176;</div></td>' +
                    '</tr><tr><td colspan="2" style="font-size: 14px;font-weight:bold;">' + loc.city + '</td></tr></table>';

                //binding to div tag
                $('.secondheaderweather').html(tableweather);

            },
            error: function (data) {
                console.log(data);
            }
        });
    };
</script>
<!-- Weather __geoJSONPCallback function-->
<script src="https://geo.weatherfor.us/json/?callback=__geoJSONPCallback" type="text/javascript"></script>

<!-- Weather script end here-->

<style type="text/css">

    /*Second header css*/

    .secondheadercontainer {
        background-color: #e0e0e0;
        height: 100%;
    }

    .secondheadersearch {
        display: inline-block;
        text-align: left;
        vertical-align: top;
        line-height: 30px;
        height: 100%;
        width: 80%;
    }

    .secondheaderemail {
        display: inline-block;
        height: 100%;
        padding-left: 0px;
    }

    .secondheaderweather {
        display: inline-block;
        text-align: left;
        height: 100%;
        margin-left: 5px;
    }

    /*Second header responsive */

    @media screen and (min-width:769px) and (max-width:1360px) {
        .secondheadersearch {
            width: auto !important;
            min-width: 60% !important;
        }
    }


    @media screen and (max-width: 768px) {
        .secondheadersearch, .secondheaderemail, .secondheaderweather {
            width: 100%;
            height: 100%;
        }

        .secondheaderweather {
            padding-left: 18px !important;
        }

        .secondheaderemail {
            padding-top: 20px !important;
        }

        .secondheaderhorizontalline {
            display: none !important;
        }
    }
</style>

<!-- Second Header Start-->
<div class="secondheadercontainer ms-dialogHidden">

    <div class="secondheadersearch">
        <div id="UserLoginuserName" style="font-size: 14px;margin-top: 10px;margin-left: 30px;font-weight:bold;">
        </div>
        <div style="margin-left: 30px;">
            <!--<input type="textbox" style="width:40%;height:22px;" />-->
            <!--CS: Start Search Box Snippet--><!--SPM:<%@Register Tagprefix="a2e8ead9d"  Namespace="Microsoft.Office.Server.Search.WebControls" Assembly="Microsoft.Office.Server.Search, Version=15.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %>--><!--MS:<a2e8ead9d:SearchBoxScriptWebPart runat="server" QueryGroupNamesJson="[&quot;Default&quot;]" UpdatePageTitle="False" StatesJson="{}" ServerIncludeScriptsJson="null" Title="&lt;%$Resources:Microsoft.Office.Server.Search,SearchBoxScriptWP_Title;%&gt;" FrameType="None" SuppressWebPartChrome="False" Description="&lt;%$Resources:Microsoft.Office.Server.Search,SearchBoxScriptWP_Desc;%&gt;" IsIncluded="True" ZoneID="" PartOrder="0" FrameState="Normal" AllowRemove="True" AllowZoneChange="True" AllowMinimize="True" AllowConnect="True" AllowEdit="True" AllowHide="True" IsVisible="True" DetailLink="" HelpLink="" HelpMode="Modeless" Dir="Default" PartImageSmall="" MissingAssembly="&lt;%$Resources:core,ImportErrorMessage;%&gt;" ImportErrorMessage="&lt;%$Resources:core,ImportErrorMessage;%&gt;" PartImageLarge="" IsIncludedFilter="" ExportControlledProperties="True" ConnectionID="00000000-0000-0000-0000-000000000000" ID="g_6be2f77a_a546_4111_a9ed_f22f86ebc94d" ChromeType="None" ExportMode="All" __MarkupType="vsattributemarkup" __WebPartId="{6be2f77a-a546-4111-a9ed-f22f86ebc94d}" WebPart="true" Height="" Width="">--><!--ME:</a2e8ead9d:SearchBoxScriptWebPart>--><!--PS: Start of READ-ONLY PREVIEW (do not modify)-->
            <div class="ms-webpart-chrome ms-webpart-chrome-fullWidth ">
                <div webpartid="00000000-0000-0000-0000-000000000000" haspers="true" id="WebPartWPQ1" width="100%" class="ms-WPBody noindex " onlyformepart="true" allowdelete="false" style="">
                    <div componentid="ctl00_ctl00_PlaceHolderMain_ComponentMain_ComponentPropertyGrids_g_6be2f77a_a546_4111_a9ed_f22f86ebc94d_csr" id="ctl00_ctl00_PlaceHolderMain_ComponentMain_ComponentPropertyGrids_g_6be2f77a_a546_4111_a9ed_f22f86ebc94d_csr"></div><noscript><div id="ctl00_ctl00_PlaceHolderMain_ComponentMain_ComponentPropertyGrids_g_6be2f77a_a546_4111_a9ed_f22f86ebc94d_noscript">It looks like your browser does not have JavaScript enabled. Please turn on JavaScript and try again.</div></noscript><div id="ctl00_ctl00_PlaceHolderMain_ComponentMain_ComponentPropertyGrids_g_6be2f77a_a546_4111_a9ed_f22f86ebc94d">

                    </div><div class="ms-clear"></div>
                </div>
            </div><!--PE: End of READ-ONLY PREVIEW--><!--CE: End Search Box Snippet-->

        </div>
    </div>

    <div class="secondheaderemail">
        <table>
            <tr>
                <td style="text-align: left;vertical-align: bottom;padding-left: 25px;">
                    <img src="../../Style%20Library/Connect_Redesign_2019/images/email-icons.png" style="max-width: 25px;" alt="email-icon" />
                </td>
                <td style="padding-right: 10px;"><a target="_blank" href="https://outlook.office365.com/" style="font-size: 14px;font-weight: bold;">My Webmail</a></td>

            </tr>

        </table>
    </div>
    <div class="secondheaderhorizontalline" style="border-left: 1.2px solid black;height: 65px;display: inline-block;margin-bottom: 5px;"></div>
    <div class="secondheaderweather"></div>

</div>
<!--Second Header End-->
